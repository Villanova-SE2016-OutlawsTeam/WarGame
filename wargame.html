<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>War Game</title>
	
<style>
table {
	width: 1280px;
}

.col1 {
	width: 13%
	text-align: left;
}

.col2 {
	width: 35%;
	text-align: right;
}

.col3 {
	width: 4%;
	text-align: center;
}

.col4 {
	width: 35%;
	text-align: left;
}

.col5 {
	width: 13%;
	text-align: right;
}

</style>
</head>
<body>

<!-- Render War Game main component --> 
<h1>War Game</h1>
<div id='war_game'>
<table>
	<tr>
		<th colspan=2 align="left">Player 1</th>
		<th align="center"></th>
		<th colspan=2 align="right">Player 2</th>
	</tr>
    <tr>
        <td id="player1" class="col1" onclick="cardClick('player1')">
        </td>
		
		<td id="battlefield1" class="col2">            
        </td>
		
		<td id="nomansland" class="col3">
			<!-- Deal cards and remove start button on click -->
			<div id="start">
				<img onclick="this.parentNode.remove();dealDeck()" src="other_images/StartButton.png">
			</div>
		</td>
		
		<td 
		<td id="battlefield2" class="col4">            
        </td>
		
        <td id="player2" class="col5" onclick="cardClick('player2')">
        </td>
    </tr>   

</table>
</div>

<script src="Deck.js"></script>
<script type="text/javascript">

var imageTag = ""
var image_dir="card_images/"

// Create 2 players
p1 = new Player(GameConstants.HUMAN, GameConstants.PLAYER1)
p2 = new Player(GameConstants.COMPUTER, GameConstants.PLAYER2)

var p1_activeCard;
var p2_activeCard;

function dealDeck() {
	starting_deck = new Deck()
	starting_deck.create_deck()
	starting_deck.shuffle()

	var deck_count = starting_deck.count()

	for (var i = 0; i < deck_count; i++) {
		card = starting_deck.pop()

		if (i % 2 == 0) {
			p1.active_deck.add(card)
			var card_img_file = image_dir + "backface" + ".png"
			var imageTag = "<img src='" + card_img_file + "' />"
			document.getElementById(GameConstants.PLAYER1).innerHTML = imageTag
		} else {
			p2.active_deck.add(card)
			var card_img_file = image_dir + "backface" + ".png"
			var imageTag = "<img src='" + card_img_file + "' />"
			document.getElementById(GameConstants.PLAYER2).innerHTML = imageTag
		}
	}
}

function cardClick(playerNumber){

    var imageTag = ""
    var image_dir="card_images/"
	
    if(playerNumber == GameConstants.PLAYER1){
        var card = p1.active_deck.pop()
		p1_activeCard = card
        if(card){
            var card_img_file = image_dir + card.id + ".png"
            var imageTag = "<img src='" + card_img_file + "' />"
            document.getElementById(GameConstants.BATTLEFIELD1).innerHTML = imageTag
        }
    }else{
        var card = p2.active_deck.pop()
		p2_activeCard = card
        if(card){
            var card_img_file = image_dir + card.id + ".png"
            var imageTag = "<img src='" + card_img_file + "' />"
            document.getElementById(GameConstants.BATTLEFIELD2).innerHTML = imageTag
        }
    }
}



</script>

</body>
</html>